---
title: "Confirmatory Factor Analysis"
author: "Statsomat.com"
date: "`r format(Sys.time(), '%d %B %Y')`"
output:
  pdf_document:
    latex_engine: xelatex
    toc: true
    toc_depth: 2
bibliography: ["references.bib"]
fontsize: 11pt
params:
  data: NA
  filename: NA
  fencoding: NA
  decimal: NA
  enc_guessed: NA
  vars1: NA
  model: NA
  direction: NA
header-includes:
   - \usepackage{xcolor}
   - \setmainfont[BoldFont=FiraSans-Bold, Extension=.otf]{FiraSans-Regular}
   - \usepackage{booktabs}
   - \usepackage{longtable}
   - \usepackage{float}
---


```{r, dev="cairo_pdf", results="asis", echo = FALSE}
# Check model syntax 
msyntax <- FALSE
model <- params$model
modelsplit <- unlist(strsplit(model, split="\n"))
if (modelsplit[1]=="") modelsplit <- modelsplit[2:length((modelsplit))]
for (i in 1:length(modelsplit)){
  if (grepl("=~",modelsplit[i])==FALSE && grepl("~~",modelsplit[i])==FALSE && grepl("~1",modelsplit[i])==FALSE){
    cat("\\large Error: Only following lavaan model syntax operators are allowed: =\\~,\\~\\~,\\~1", fill=TRUE)
    break
  } else {
    msyntax <- TRUE
  }
}
```     


```{r, results="asis", dev="cairo_pdf", eval=msyntax, echo = FALSE}
cat("**Warning: The automatic computation and interpretation delivered by the Statsomat should not completely replace the classical, made by humans graphical exploratory data analysis and statistical analysis. There may be data cases for which the Statsomat does not deliver the most optimal solution or output interpretation.**")
```    


```{r child = 'report_kernel.Rmd', eval=msyntax}
```




